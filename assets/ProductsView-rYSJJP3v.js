import{a as p,S as w}from"./sweetalert2.all-BG_37rGc.js";import{L as P}from"./index-BzRAb6_E.js";import{_ as C}from"./ProductModal-tPVypetU.js";import{r as n,f as V,c as o,a as e,b as f,u as E,F as m,g as T,o as a,n as $,t as r,h as d,i as g}from"./index-CFgC8OHU.js";var S={VITE_URL:"https://vue3-course-api.hexschool.io",VITE_PATH:"payroom",BASE_URL:"/vue2023-week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const I={class:"container mx-a"},L={class:"w-100% mt-6 mb-4"},M=e("thead",null,[e("tr",{class:"font-bold text-left border-b border-black border-solid"},[e("th",null,"圖片"),e("th",null,"商品名稱"),e("th",null,"價格"),e("th")])],-1),z={class:"w-200px"},B={key:0,class:"font-size-5"},D={key:1},R={class:"font-size-4"},A={class:"font-size-5"},O=["onClick","disabled"],U={key:0,class:"i-svg-spinners:12-dots-scale-rotate absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},N=e("span",null," 查看更多 ",-1),F=["onClick","disabled"],H={key:0,class:"i-svg-spinners:12-dots-scale-rotate absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"},Q={__name:"ProductsView",setup(j){const{VITE_URL:c,VITE_PATH:u}=S,v=n(),i=n(),_=n({}),s=n([]);function y(){s.value.push("fullPage"),p.get(`${c}/v2/api/${u}/products/all`).then(l=>{v.value=l.data.products}).catch(l=>{console.log(l)}).finally(()=>{s.value.splice(s.value.indexOf("fullPage"),1)})}function x(l){_.value=l,i.value.dialog.showModal()}function b(l,h=1){s.value.push(l),p.post(`${c}/v2/api/${u}/cart`,{data:{product_id:l,qty:h}}).then(()=>{i.value.dialog.close(),w.fire({title:"加入購物車成功",icon:"success",toast:!0,position:"bottom-end",timer:"1500",showConfirmButton:!1})}).catch(t=>{console.log(t)}).finally(()=>{s.value.splice(s.value.indexOf(l),1)})}return V(()=>{y()}),(l,h)=>(a(),o(m,null,[e("main",null,[f(E(P),{active:s.value.includes("fullPage"),fullPage:!0,transition:"fade"},null,8,["active"]),e("div",I,[e("table",L,[M,e("tbody",null,[(a(!0),o(m,null,T(v.value,t=>(a(),o("tr",{class:"border-b border-solid border-#eee",key:t.id},[e("td",z,[e("div",{class:"h-100px bg-center bg-cover",style:$({backgroundImage:`url('${t.imageUrl}')`})},null,4)]),e("td",null,r(t.title),1),e("td",null,[t.price===t.origin_price?(a(),o("div",B,r(t.price)+" 元 ",1)):(a(),o("div",D,[e("del",R,"原價 "+r(t.origin_price)+" 元",1),e("div",A,"現在只要 "+r(t.price)+" 元",1)]))]),e("td",null,[e("div",null,[e("button",{type:"button",class:d(["bg-transparent text-#6c757d px2 py-1 border-1 border-r-0 border-solid border-#6c757d rd-tl rd-bl hover:bg-#6c757d hover:text-white hover:cursor-pointer",{"op-50 cursor-not-allowed relative":s.value.includes(t.id)}]),onClick:k=>x(t),disabled:s.value.includes(t.id)},[s.value.includes(t.id)?(a(),o("div",U)):g("",!0),N],10,O),e("button",{type:"button",class:d(["bg-transparent text-red px2 py-1 border-1 border-solid border-red rd-tr rd-br hover:bg-red hover:text-white hover:cursor-pointer",{" cursor-not-allowed relative":s.value.includes(t.id)}]),onClick:k=>b(t.id),disabled:s.value.includes(t.id)},[s.value.includes(t.id)?(a(),o("div",H)):g("",!0),e("span",{class:d({"op-50":s.value.includes(t.id)})},"加到購物車",2)],10,F)])])]))),128))])])])]),f(C,{ref_key:"productModal",ref:i,"temp-product":_.value,onAddToCart:b},null,8,["temp-product"])],64))}};export{Q as default};
